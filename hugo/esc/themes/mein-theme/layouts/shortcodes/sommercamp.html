{{/* layouts/shortcodes/sommercamp.html */}}
<div class="form-container">
  <h2>Sommercamp</h2>
  <form id="sommercamp-form">
    <div class="form-row">
        <label for="geburtsjahr">Geburtsjahr:</label>
        <input type="number" id="geburtsjahr" name="geburtsjahr" value="" required>
    </div>

    <div class="form-row">
        <label for="nachname">Name:</label>
        <input type="text" id="name" name="nachname" value="" required>
    </div>

    <div class="form-row">
        <label for="vorname">Vorname:</label>
        <input type="text" id="vorname" name="vorname" value="" required>
    </div>

    <div class="form-row">
        <label for="email">E-Mail:</label>
        <input type="email" id="email" name="email" value="" required>
    </div>

    <div class="form-row">
        <label for="postleitzahl">Postleitzahl:</label>
        <input type="text" id="postleitzahl" name="postleitzahl" value="" required>
    </div>

    <div class="form-row">
        <label for="verein">Verein:</label>
        <input type="text" id="verein" name="verein" value="" required>
    </div>

    <div class="form-row">
        <label for="position">Position:</label>
        <input type="text" id="position" name="position" value="" required>
    </div>

    <div class="form-row">
        <label for="trikotgrösse">Trikotgröße:</label>
        <input type="number" id="trikotgrösse" name="trikotgroesse" value="" required>
    </div>

    <div class="form-row">
        <label for="bemerkung">Bemerkung:</label>
        <textarea id="bemerkung" name="bemerkung"></textarea>
    </div>
    <!-- Hidden IP field - wird per JavaScript befüllt -->
    <div class="submit-row">
        <button type="submit">Anmelden</button>
    </div>
  </form>
</div>
<script>
  document.getElementById('sommercamp-form').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const formData = new FormData(this);
      const data = {};
      
      for (let [key, value] of formData.entries()) {
          data[key] = value;
      }
      
      console.log('Anmeldedaten:', data);
      alert('Anmeldung erfolgreich übermittelt! (Siehe Konsole für Details)');
  });
  // Hidden Field zum Formular hinzufügen
  function addClientIPField() {
      // IP von externem Service holen
      fetch('https://api.ipify.org?format=json')
          .then(response => response.json())
          .then(data => {
              // Hidden field erstellen oder updaten
              let ipField = document.getElementById('ip') || 
                          document.createElement('input');
              ipField.type = 'hidden';
              ipField.name = 'ip';
              ipField.id = 'ip';
              ipField.value = data.ip;
              
              // Zum Formular hinzufügen falls noch nicht vorhanden
              if (!document.getElementById('ip')) {
                  document.querySelector('form').appendChild(ipField);
              }
          })
          .catch(err => {
              console.log('IP detection failed:', err);
              // Fallback: leeres Feld
              let ipField = document.createElement('input');
              ipField.type = 'hidden';
              ipField.name = 'ip';
              ipField.value = 'unknown';
              document.querySelector('form').appendChild(ipField);
          });
  }

  // Beim Laden der Seite ausführen
  document.addEventListener('DOMContentLoaded', addClientIPField);

</script>